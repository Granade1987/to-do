<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<title>To-Do</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/svg+xml" href="https://mikesjustformen.nl/wp-content/uploads/2022/02/Mikes-just-for-men-Logo-wit.svg">
</head>
<body>
<div class="container">
    <div class="header-row">
        <img src="https://mikesjustformen.nl/wp-content/uploads/2022/02/Mikes-just-for-men-Logo-wit.svg" 
             alt="Mikes Just For Men Logo" 
             class="logo-header">
        <h1>To-Do</h1>
    </div>
    
    <!-- Filters -->
    <div class="filters-bulk-row">
        <div class="bulk-actions-inline">
            <button id="createTicketBtn" class="btn btn-primary">Nieuw</button>
            <button id="settingsBtn" class="btn-icon" title="Instellingen" onclick="openSettingsModal()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m5.08 5.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m5.08-5.08l4.24-4.24"></path>
                </svg>
            </button>
            <button id="exportCsvBtn" class="btn-icon" title="Exporteren">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
            </button>
            <label class="btn-icon" title="Importeren" style="cursor:pointer;">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="17 8 12 3 7 8"></polyline>
                    <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                <input id="importCsvInput" type="file" accept=".csv" style="display:none;">
            </label>
        </div>
        <div class="filters-inline">
              <label><b>Status filter:</b>
                <select id="statusFilter">
                    <option value="Alle">Alle</option>
                    <option value="Open">Open</option>
                    <option value="In behandeling">In behandeling</option>
                    <option value="Gesloten">Gesloten</option>
                </select>
            </label>
            <label><b>Toegewezen aan:</b>
                <select id="assignedtoFilter">
                    <option value="Iedereen">Iedereen</option>
                    <option value="Extern">Extern</option>
                    <option value="Chris">Chris</option>
                </select>
            </label>           
            <label><b>Sorteer op:</b>
                <select id="sortFilter">
                    <option value="created_at">Nieuwste eerst</option>
                    <option value="status" selected>Status</option>
                </select>
            </label>
        </div>
    </div>

    <!-- Tickets tabel -->
    <div class="ticket-list-container">
        <table id="ticketTable">
            <thead>
                <tr>
                    <th>Titel</th>
                    <th>Beschrijving</th>
                    <th>Status</th>
                    <th>Toegewezen aan</th>
                    <th>Aangemaakt</th>
                    <th>Gesloten op</th>
                </tr>
            </thead>
            <tbody id="ticketList"></tbody>
        </table>
    </div>
</div>

<!-- Modal voor ticket details -->
<div id="ticketModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <h2>Ticket Details</h2>
        <input type="hidden" id="modalTicketId">
        <div class="modal-field">
            <label class="modal-label">Titel:</label>
            <input type="text" id="modalTitle" class="modal-input" placeholder="Titel">
        </div>
        <div class="modal-field">
            <label class="modal-label">Beschrijving:</label>
            <textarea id="modalDescription" class="modal-input" placeholder="Beschrijving"></textarea>
        </div>
        <div class="modal-field">
            <label class="modal-label">Status:</label>
            <select id="modalStatus" class="modal-status-select">
                <option value="Open">Open</option>
                <option value="In behandeling">In behandeling</option>
                <option value="Gesloten">Gesloten</option>
            </select>
        </div>
        <div class="modal-field">
            <label class="modal-label">Toegewezen aan:</label>
            <select id="modalAssigned" class="modal-status-select">
                <option value="Chris">Chris</option>
                <option value="Extern">Extern</option>
            </select>
        </div>
        <div class="modal-field">
            <label class="modal-label">Aangemaakt op:</label>
            <div id="modalCreated" class="modal-value"></div>
        </div>
        <div class="modal-field">
            <label class="modal-label">Gesloten op:</label>
            <div id="modalClosed" class="modal-value"></div>
        </div>
        <div class="modal-actions">
            <button id="modalSaveBtn" class="btn btn-primary" onclick="updateStatusFromModal()">Opslaan</button>
            <button id="modalCloseBtn" class="btn btn-secondary" onclick="closeModal()">Sluiten</button>
            <span id="modalDeleteBtn" class="modal-delete-link" onclick="deleteTicketFromModal()">Verwijder ticket</span>
        </div>
    </div>
</div>

<!-- Modal voor nieuw ticket -->
<div id="createTicketModal" class="modal" style="display: none;">
    <div class="modal-content">
        <span class="modal-close" onclick="closeCreateModal()">&times;</span>
        <h2>Nieuw Ticket</h2>
        <div class="modal-field">
            <label class="modal-label">Titel:</label>
            <input id="newTicketTitle" type="text" placeholder="Titel" class="modal-input">
        </div>
        <div class="modal-field">
            <label class="modal-label">Beschrijving:</label>
            <textarea id="newTicketDescription" placeholder="Beschrijving" class="modal-input"></textarea>
        </div>
        <div class="modal-field">
            <label for="newTicketStatus" class="modal-label">Status</label>
            <select id="newTicketStatus" class="modal-status-select">
                <option value="Open">Open</option>
                <option value="In behandeling">In behandeling</option>
                <option value="Gesloten">Gesloten</option>
            </select>
        </div>
        <div class="modal-field">
            <label class="modal-label">Toegewezen aan:</label>
            <select id="newTicketAssigned" class="modal-status-select">
                <option value="Chris">Chris</option>
                <option value="Extern">Extern</option>
            </select>
        </div>
        <div class="modal-actions">
            <button onclick="saveNewTicket()" class="btn btn-primary">Ticket Aanmaken</button>
            <button onclick="closeCreateModal()" class="btn btn-secondary">Annuleren</button>
        </div>
    </div>
</div>

<!-- Settings Modal -->
<div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-content">
        <button class="modal-close" onclick="closeSettingsModal()">Ã—</button>
        <h2>Instellingen</h2>
        
        <div class="modal-section">
            <h3>GitHub Sync</h3>
            <p style="font-size: 12px; color: #888; margin-bottom: 10px;">
                Je tickets worden automatisch gesynchroniseerd met GitHub. Voer je GitHub token in.
            </p>
            <div class="modal-field">
                <label class="modal-label">GitHub Personal Access Token:</label>
                <input id="githubTokenInput" type="password" placeholder="github_pat_..." class="modal-input">
            </div>
            <div style="font-size: 11px; color: #666; margin: 10px 0;">
                ðŸ’¡ <a href="https://github.com/settings/tokens" target="_blank" style="color: #0066cc;">Maak een token aan op GitHub</a> 
                (scope: repo)
            </div>
        </div>
        
        <div class="modal-actions">
            <button onclick="saveGithubToken()" class="btn btn-primary">Opslaan</button>
            <button onclick="closeSettingsModal()" class="btn btn-secondary">Annuleren</button>
        </div>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>